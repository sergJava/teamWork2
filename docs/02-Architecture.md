Диаграмма компонентов:

![Диаграмма компонентов сервиса рекомендаций - получение рекомендаций](./images/architecture-component-diagram-get-recommendations.png)
![Диаграмма компонентов сервиса рекомендаций - управление динамическими правилами](./images/architecture-component-diagram-managing-dynamic-rules.png)
![Диаграмма компонентов сервиса рекомендаций - телеграм бот](./images/architecture-component-diagram-telegram-bot.png)

*   **Внешние системы:** API-клиенты и Telegram Server взаимодействуют с контроллерами по HTTP.
*   **Базы данных:** H2 используется только для чтения исходных данных, PostgreSQL — для хранения динамических правил.

Внешние системы: Telegram Server, API Client (например, Postman или фронтенд).

Базы данных: H2 (только для чтения, исходные данные), PostgreSQL (для чтения/записи, динамические правила).


## Диаграмма деятельности

Алгоритм формирования рекомендаций для пользователя:

![Диаграмма деятельности процесса выдачи рекомендаций](./images/architecture-activity-diagram.png)

1.  Система проверяет все статические правила (жестко заданные в коде).
2.  Затем загружает все динамические правила из базы данных.
3.  Для каждого динамического правила вычисляется результат на основе запросов (QUERY).
4.  Если правило срабатывает, увеличивается счетчик его срабатываний и продукт добавляется в результат.
5.  Формируется и возвращается итоговый ответ с рекомендациями.